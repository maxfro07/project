Роль certbot
=========

Данная роль занимается выпуском SSL сертификатов


Пример запуска
-----------------

```ansible-playbook role-certbot.yml --extra-vars "target=mon01" -u ubuntu --ask-become-pass```

В этой команде:

* role-certbot.yml - запустит роль certbot
* target=monitoring - в переменной target мы передаём имя сервера. Тут лучше получать сертификаты на каждом сервере по своему
* -u ubuntu - имя учётки, от которой будем делать установку
* --ask-become-pass - передать системе пароль sudo



Ручное получание сертификата
-----------------

Иногда случается, что нужно вручную получить SSL сертификат. То тогда можно воспользоваться командой

```certbot certonly --standalone --noninteractive --agree-tos --email admin@gmr.su -d gmr.su```

Здесь очень важно, что для того, что бы команда выполнелась нужно что бы на сервере не работал не один web сервер. Поэтому все работающие web сервера, такие как nginx или apache отключаем. После получания сертификатов, web сервер можно снова включить.




Переменные
--------------

Для работы роли certbot нам могут понадобится следующие переменные:

* certbot_create_standalone_stop_services - выбрать какая программа работает в качестве web сервера
* certbot_create_if_missing - стоит ли выпускать сертификаты
* certbot_certs - список доменов, на которых надо получить SSL сертификаты


Теги
----------------

* certbot - тег устанавливающий certbot и запускающий выпуск сертификата SSL
* certbot_config - тег делающий только настройку certbot и выпуск сертификата SSL
